# Ralph Progress Log
Started: Wed Jan 22 2026

## Codebase Patterns
- Frontend located at `/frontend` directory
- Run quality checks from frontend dir: `npm run build`, `npm run typecheck`, `npm run lint`
- Format code before committing: `npm run format` (Prettier with Tailwind class sorting)
- TypeScript strict mode enabled in tsconfig.json
- Next.js App Router in `src/app/` directory
- Path alias `@/*` maps to `./src/*`
- Environment config files go in `src/config/` directory
- Tailwind v4 uses `@theme inline { }` blocks in `globals.css` for theme configuration
- Dark mode is class-based - add `.dark` class to html element to enable
- shadcn/ui components in `src/components/ui/` - use sonner for toasts (toast deprecated)
- Use `cn()` from `@/lib/utils` for conditional Tailwind classes
- Folder structure: `components/layout/` for Header/Footer, `components/shared/` for reusable, `hooks/` for custom hooks, `stores/` for Zustand, `types/` for TS types, `providers/` for context providers
- App constants in `@/lib/constants` (ENTRY_FEE_SOL, TOURNAMENT_CONFIG, SCORING, ROUTES, etc.)
- React Query provider in `@/providers/QueryProvider` - wrap app for server state management
- Solana wallet provider in `@/providers/WalletProvider` - import wallet CSS there, not in globals.css
- Backpack wallet auto-detected via Wallet Standard - no explicit adapter needed
- Zustand store in `@/stores/useAppStore` - use selector hooks for optimized re-renders
- ThemeProvider in `@/providers/ThemeProvider` - wraps app for next-themes dark mode support
- Provider wrapping order in layout: ThemeProvider > QueryProvider > WalletProvider > children
- Inter font configured via `--font-inter` CSS variable, used as `font-sans` class
- Install shadcn/ui components via: `npx shadcn@latest add <component-name> --yes`
- Use `useMounted()` hook from `@/hooks/useMounted` for hydration-safe client-only rendering

---

## 2026-01-23 - dark-mode-toggle-US-001, US-002, US-003, US-004, US-007
- Verified existing dark mode infrastructure was already in place (US-001, US-002, US-003, US-007)
- Created ThemeToggle.tsx component with Sun/Moon/Monitor icons
- Created useMounted.ts hook using useSyncExternalStore for hydration-safe mounting
- ThemeToggle cycles through light -> dark -> system -> light
- Files changed:
  - frontend/src/components/shared/ThemeToggle.tsx (new)
  - frontend/src/hooks/useMounted.ts (new)
  - scripts/ralph/prd.json (updated passes to true)
- **Learnings for future iterations:**
  - The ESLint rule `react-hooks/set-state-in-effect` prevents useState + useEffect for mounting detection
  - Use useSyncExternalStore with getServerSnapshot returning false for hydration-safe client detection
  - The hooks/ directory is at src/hooks/ (created for this story)
  - Typecheck has pre-existing test mock errors - build passes but typecheck fails on test files
---

