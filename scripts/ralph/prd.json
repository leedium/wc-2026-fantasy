{
  "project": "WC2026",
  "branchName": "ralph/solana-wallet-connect",
  "description": "Solana Wallet Connectivity - Enable functional wallet connection with network selection, balance display, and persistent sessions",
  "userStories": [
    {
      "id": "solana-wallet-connect-US-001",
      "title": "Set up wallet adapter providers",
      "description": "As a developer, I need to configure the Solana wallet adapter so that wallet functionality is available throughout the app.",
      "acceptanceCriteria": [
        "Install @solana/wallet-adapter-react, @solana/wallet-adapter-react-ui, @solana/wallet-adapter-wallets, @solana/web3.js",
        "Create WalletContextProvider component wrapping ConnectionProvider and WalletProvider",
        "Configure adapters for Phantom, Backpack, Solflare, Ledger, and other major wallets",
        "Wrap app layout with WalletContextProvider",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Added LedgerWalletAdapter. Backpack uses Wallet Standard auto-detect."
    },
    {
      "id": "solana-wallet-connect-US-002",
      "title": "Add network selector",
      "description": "As a user, I want to select which Solana network to connect to so I can use devnet for testing or mainnet for real transactions.",
      "acceptanceCriteria": [
        "Network selector dropdown with options: Mainnet, Devnet, Testnet",
        "Selected network stored in localStorage and persists across sessions",
        "Network selection updates the RPC endpoint used by ConnectionProvider",
        "Default to Devnet if no network previously selected",
        "Network change triggers wallet reconnection if already connected",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Uses Zustand store with persistence. Network change forces provider re-mount via key prop."
    },
    {
      "id": "solana-wallet-connect-US-003",
      "title": "Implement connect wallet button",
      "description": "As a user, I want to click 'Connect Wallet' to see a list of available wallets so I can connect my preferred wallet.",
      "acceptanceCriteria": [
        "Replace placeholder button with functional connect button",
        "Clicking button opens wallet selection modal showing installed wallets",
        "Wallets that are not installed show 'Install' link to their respective stores",
        "Modal is styled consistently with existing UI (shadcn/ui, Tailwind)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Custom ConnectWalletButton using shadcn/ui Dialog and Button. Detects installed wallets via readyState. Links to wallet store for not-installed wallets."
    },
    {
      "id": "solana-wallet-connect-US-004",
      "title": "Display connected state with truncated address",
      "description": "As a user, I want to see my truncated wallet address on the button after connecting so I know which wallet is active.",
      "acceptanceCriteria": [
        "After successful connection, button shows truncated address (e.g., '7xKp...3nFq')",
        "Truncation shows first 4 and last 4 characters of the address",
        "Button styling changes to indicate connected state (e.g., different background color or border)",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Uses truncateAddress helper function. Connected state shows green indicator dot and green-tinted outline button variant."
    },
    {
      "id": "solana-wallet-connect-US-005",
      "title": "Fetch SOL balance",
      "description": "As a developer, I need to fetch the user's SOL balance from the blockchain so it can be displayed in the wallet popup.",
      "acceptanceCriteria": [
        "Fetch balance using connection.getBalance() after wallet connects",
        "Convert lamports to SOL (divide by 1e9)",
        "Update balance when network changes",
        "Handle errors gracefully (show 'â€”' if balance fetch fails)",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Created useSolBalance hook using useConnection and useWallet. Uses LAMPORTS_PER_SOL constant for conversion. Provides balance, isLoading, error, and refetch."
    },
    {
      "id": "solana-wallet-connect-US-006",
      "title": "Show wallet details popup",
      "description": "As a user, I want to click my connected wallet button to see my full address, balance, and disconnect option.",
      "acceptanceCriteria": [
        "Clicking connected wallet button opens a popup/dropdown",
        "Popup displays full wallet address with copy-to-clipboard button",
        "Popup displays current SOL balance (formatted to 4 decimal places)",
        "Popup includes 'Disconnect' button",
        "Popup closes when clicking outside or pressing Escape",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Uses Radix Popover via shadcn/ui. Integrates useSolBalance hook for balance display. Copy-to-clipboard with visual feedback (Check icon). Escape/click-outside handled by Radix."
    },
    {
      "id": "solana-wallet-connect-US-007",
      "title": "Implement disconnect functionality",
      "description": "As a user, I want to disconnect my wallet so I can switch accounts or protect my privacy.",
      "acceptanceCriteria": [
        "Clicking 'Disconnect' in popup disconnects the wallet",
        "Button returns to 'Connect Wallet' state after disconnect",
        "Popup closes after disconnect",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Functionality was already implemented in US-006. Uses handleDisconnect callback that calls disconnect() from useWallet and closes popover."
    },
    {
      "id": "solana-wallet-connect-US-008",
      "title": "Auto-reconnect on page refresh",
      "description": "As a user, I want my wallet to stay connected when I refresh the page so I don't have to reconnect every time.",
      "acceptanceCriteria": [
        "Wallet adapter configured with autoConnect: true",
        "Previously connected wallet automatically reconnects on page load",
        "If auto-reconnect fails (e.g., wallet locked), button shows 'Connect Wallet' state",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "solana-wallet-connect-US-009",
      "title": "Handle connection errors with toast notifications",
      "description": "As a user, I want to see a clear error message if my wallet connection fails so I know what went wrong.",
      "acceptanceCriteria": [
        "User rejection shows toast: 'Connection cancelled'",
        "Wallet not found shows toast: 'Wallet not found. Please install [wallet name]'",
        "Network error shows toast: 'Failed to connect. Please try again'",
        "Toast notifications use existing toast system (sonner)",
        "Toasts auto-dismiss after 5 seconds",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    }
  ]
}
